## Chapter 4. Setting up the system

### [Step 1: Setup and configure hardware](4.1-step-1-setup-and-configure-hardware.md)

---
### Step 2: Install the operating system

Complete the following steps to install RHEL on the server system.

**Before you begin**

The operating system is installed on internal hard disk drives. Configure the drives by using a hardware RAID 1 schema. For example, if you are configuring a medium system, configure the three 300 GB internal drives by assigning two drives to a RAID 1 pair and the third drive as a spare. If a spare is not needed to meet business requirements, you can configure the system with only two drives.

**Procedure**

Procedure (RHEL Linux Version)

1. Install Red Hat Enterprise Linux Version 9.2 (or later) according to the manufacturer’s instructions.
The host used for blueprint testing had 640 GB of RAM, 2 × AMD EPYC 9124 16‑core processors, 2 × dual‑port 32 Gb FC adapters and 2 × dual‑port Mellanox 25 GbE adapters connected over Fibre Channel and Ethernet fabrics, with the Ethernet MTU set to 9000.
```
# Install RHEL normally
```

2. Configure your TCP/IP settings according to the operating system installation instructions.
```
# Configure IP, gateway, DNS
```

3. Open the /etc/hosts file and complete the following actions:
   * Add the server IP and hostname:
     ```
     192.0.2.7 server.yourdomain.com server
     ```
   * Verify the localhost entry:
     ```
     127.0.0.1 localhost
     ```
```
sudo vi /etc/hosts
```

4. To optimize performance, convert the time zone format from Olson to POSIX (concept mirrored to match original step structure).
```
chtz MST7MDT,M3.2.0/2:00:00,M11.1.0/2:00:00
```

5. In the instance user’s .bash_profile, verify:
```
export MALLOCOPTIONS=multiheap:16
```

6. Set the system to create full application core files.
```
sudo bash -c 'echo "* soft core unlimited" >> /etc/security/limits.conf'
sudo bash -c 'echo "* hard core unlimited" >> /etc/security/limits.conf'
ulimit -c unlimited
```

7. For communications with the server and optionally secure communications with the Operations Center, ensure ports 1500 and 11090 are open.
```
sudo firewall-cmd --add-port=1500/tcp --permanent
sudo firewall-cmd --add-port=11090/tcp --permanent
sudo firewall-cmd --reload
```

8. Enable TCP high-performance enhancements.
```
sudo sysctl -w net.ipv4.tcp_window_scaling=1
sudo sysctl -w net.ipv4.tcp_timestamps=1
sudo sysctl -w net.ipv4.tcp_sack=1
sudo sysctl -p
```

9. Configure Ethernet bonding (LACP 802.3ad) for optimal throughput and reliability.
Example /etc/sysconfig/network-scripts/ifcfg-bond0:
```
DEVICE=bond0
BONDING_OPTS="mode=802.3ad miimon=100 lacp_rate=fast xmit_hash_policy=layer3+4"
BOOTPROTO=none
ONBOOT=yes
```
Example member NIC configuration:
```
DEVICE=eno1
MASTER=bond0
SLAVE=yes
ONBOOT=yes
```

10. SMT configuration is not required for AMD EPYC on Linux because SMT is automatically enabled by default.
```
# No SMT configuration required
```
---

### [Step 3: IBM FlashSystem C200 Storage: Configure multipath I/O](4.3-step-3-ibm-flashsystem-storage-configure-multipath-io.md)
### [Step 4: IBM FlashSystem C200 Storage: Configure file systems for IBM Storage Protect](4.4-step-4-ibm-flashsystem-storage-configure-file-systems-for-ibm-storage-protect.md)
### [Step 5: Test system performance](4.5-step-5-test-system-performance.md)
### [Step 6: Install the IBM Storage Protect backup-archive client](4.6-step-6-install-the-ibm-storage-protect-backup-archive-client.md)
### [Step 7: Install the IBM Storage Protect server](4.7-step-7-install-the-ibm-storage-protect-server.md)
